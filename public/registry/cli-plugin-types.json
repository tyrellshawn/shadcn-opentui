{
  "name": "cli-plugin-types",
  "type": "registry:lib",
  "title": "CLI Plugin Types",
  "description": "Type definitions for the CLI plugin framework supporting Ink v6.6.0+ and Pastel v4.0.0+.",
  "dependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "lib/opentui/plugins/cli/types.ts",
      "content": "// OpenTUI CLI Plugin Framework Types\n// Library-agnostic plugin system supporting Ink v6.6.0+, Pastel v4.0.0+, and future CLI libraries\n\nimport type { OpenTUIRuntimeContext, TerminalLine } from \"../../types\"\n\n// ============================================\n// Version Management\n// ============================================\n\n/** Supported CLI library identifiers */\nexport type CLILibrary = \"ink\" | \"pastel\" | \"custom\"\n\n/** Semantic version range (e.g., \"6.6.0\", \">=6.6.0 <7.0.0\") */\nexport type VersionRange = string\n\n/** Version compatibility result */\nexport interface VersionCompatibility {\n  compatible: boolean\n  negotiatedVersion: string\n  warnings?: string[]\n  requiredShims?: string[]\n  missingFeatures?: CLIFeature[]\n}\n\n/** Feature availability by version */\nexport interface VersionFeatureMap {\n  version: string\n  features: CLIFeature[]\n}\n\n// ============================================\n// Plugin Manifest\n// ============================================\n\n/** Declares plugin metadata and requirements */\nexport interface CLIAppManifest {\n  /** Unique plugin identifier */\n  name: string\n  /** Plugin version (semver) */\n  version: string\n  /** Human-readable description */\n  description?: string\n  /** Author information */\n  author?: string\n  /** Repository URL */\n  repository?: string\n  /** Target CLI library */\n  library: CLILibrary\n  /** Required library version (semver range) */\n  libraryVersion: VersionRange\n  /** Plugin capabilities/permissions */\n  capabilities?: CLIAppCapabilities\n  /** Entry command to trigger this app */\n  entryCommand?: string\n  /** Keywords for discoverability */\n  keywords?: string[]\n  /** License */\n  license?: string\n}\n\n/** Capabilities the CLI app requires */\nexport interface CLIAppCapabilities {\n  /** Needs keyboard input handling */\n  stdin?: boolean\n  /** Takes over the terminal (full-screen mode) */\n  fullscreen?: boolean\n  /** Maintains state between invocations */\n  persistentState?: boolean\n  /** Requires network access */\n  networking?: boolean\n  /** Requires file system access */\n  fileSystem?: boolean\n  /** Custom rendering (bypasses default renderer) */\n  customRenderer?: boolean\n  /** Requires focus management */\n  focusManagement?: boolean\n}\n\n// ============================================\n// CLI Application Definition\n// ============================================\n\n/** Complete CLI application definition */\nexport interface CLIAppDefinition<TProps = Record<string, unknown>> {\n  /** Plugin manifest */\n  manifest: CLIAppManifest\n  /** The main React component */\n  Component: React.ComponentType<TProps & CLIAppContext>\n  /** Commands this app provides */\n  commands?: CLICommand[]\n  /** Lifecycle hooks */\n  lifecycle?: CLIAppLifecycle\n}\n\n/** Lifecycle hooks for CLI apps */\nexport interface CLIAppLifecycle {\n  /** Called when app is registered */\n  onRegister?: (registry: CLIAppRegistry) => void\n  /** Called before app starts */\n  onBeforeStart?: (context: CLIAppContext) => void | Promise<void>\n  /** Called when app exits */\n  onExit?: (code: number) => void\n  /** Called when app encounters an error */\n  onError?: (error: Error) => void\n  /** Called when app is suspended */\n  onSuspend?: () => void\n  /** Called when app is resumed */\n  onResume?: () => void\n}\n\n// ============================================\n// Runtime Context\n// ============================================\n\n/** Context provided to running CLI apps */\nexport interface CLIAppContext {\n  /** Terminal bridge for I/O */\n  terminal: CLITerminalBridge\n  /** OpenTUI runtime reference */\n  runtime: OpenTUIRuntimeContext\n  /** Exit the application */\n  exit: (code?: number) => void\n  /** Command line arguments */\n  args: string[]\n  /** Parsed flags */\n  flags: Record<string, string | boolean | number>\n  /** App instance ID */\n  instanceId: string\n  /** App manifest */\n  manifest: CLIAppManifest\n  /** Suspend the app (allow other commands) */\n  suspend: () => void\n  /** Check if app is in foreground */\n  isForeground: () => boolean\n}\n\n/** Bridge between CLI app and OpenTUI terminal */\nexport interface CLITerminalBridge {\n  /** Write raw content */\n  write: (content: string) => void\n  /** Write a line with optional type */\n  writeLine: (content: string, type?: TerminalLine[\"type\"]) => void\n  /** Clear terminal */\n  clear: () => void\n  /** Update the current (last) line - useful for progress indicators */\n  updateLine: (content: string) => void\n  /** Set the prompt text */\n  setPrompt: (prompt: string) => void\n  /** Request user input */\n  requestInput: (prompt?: string) => Promise<string>\n  /** Terminal dimensions */\n  dimensions: TerminalDimensions\n  /** Subscribe to resize events */\n  onResize: (callback: (dims: TerminalDimensions) => void) => () => void\n  /** Subscribe to keyboard events */\n  onKeyPress: (callback: (key: string, modifiers: KeyModifiers) => void) => () => void\n  /** Render styled content using ANSI codes */\n  renderStyled: (content: StyledContent) => void\n  /** Get current cursor position */\n  getCursorPosition: () => { x: number; y: number }\n  /** Set cursor position */\n  setCursorPosition: (x: number, y: number) => void\n  /** Show/hide cursor */\n  setCursorVisible: (visible: boolean) => void\n}\n\nexport interface TerminalDimensions {\n  columns: number\n  rows: number\n}\n\nexport interface KeyModifiers {\n  ctrl: boolean\n  alt: boolean\n  shift: boolean\n  meta: boolean\n}\n\n/** Styled content for terminal rendering */\nexport interface StyledContent {\n  text: string\n  bold?: boolean\n  italic?: boolean\n  underline?: boolean\n  strikethrough?: boolean\n  color?: string\n  backgroundColor?: string\n  dim?: boolean\n  inverse?: boolean\n}\n\n// ============================================\n// Command Definition\n// ============================================\n\n/** CLI command definition */\nexport interface CLICommand {\n  /** Command name */\n  name: string\n  /** Description shown in help */\n  description: string\n  /** Command aliases */\n  aliases?: string[]\n  /** Positional arguments */\n  args?: CLICommandArg[]\n  /** Flag options */\n  flags?: CLICommandFlag[]\n  /** Subcommands */\n  subcommands?: CLICommand[]\n  /** Usage examples */\n  examples?: string[]\n  /** Command handler (if not using Component) */\n  handler?: (args: string[], flags: Record<string, unknown>, ctx: CLIAppContext) => void | Promise<void>\n}\n\nexport interface CLICommandArg {\n  name: string\n  required?: boolean\n  description?: string\n  default?: string\n  /** Validation function */\n  validate?: (value: string) => boolean | string\n}\n\nexport interface CLICommandFlag {\n  name: string\n  char?: string\n  type: \"boolean\" | \"string\" | \"number\"\n  description?: string\n  default?: string | boolean | number\n  required?: boolean\n  /** Allowed values (enum-like) */\n  choices?: (string | number)[]\n}\n\n// ============================================\n// Adapter Interface\n// ============================================\n\n/** Interface all library adapters must implement */\nexport interface ICLIAdapter {\n  /** Library identifier */\n  readonly library: CLILibrary\n  /** Adapter version */\n  readonly adapterVersion: string\n  /** Supported library version range */\n  readonly supportedVersions: VersionRange\n  \n  /** Initialize the adapter */\n  initialize(): Promise<void>\n  /** Cleanup resources */\n  destroy(): Promise<void>\n  \n  /** Check version compatibility */\n  checkCompatibility(requestedVersion: string): VersionCompatibility\n  \n  /** Create a render instance for a CLI app */\n  createRenderInstance(\n    component: React.ComponentType<unknown>,\n    props: Record<string, unknown>,\n    bridge: CLITerminalBridge\n  ): CLIRenderInstance\n  \n  /** Feature support detection */\n  supportsFeature(feature: CLIFeature): boolean\n  \n  /** Get all supported features for a version */\n  getFeaturesForVersion(version: string): CLIFeature[]\n  \n  /** Apply version-specific transformations to props */\n  transformProps?(props: Record<string, unknown>, targetVersion: string): Record<string, unknown>\n}\n\n/** Running render instance */\nexport interface CLIRenderInstance {\n  /** Instance ID */\n  readonly id: string\n  /** Re-render with new props */\n  rerender(props?: Record<string, unknown>): void\n  /** Unmount the component */\n  unmount(): void\n  /** Wait for app to exit */\n  waitUntilExit(): Promise<number>\n  /** Clear rendered content */\n  clear(): void\n  /** Pause rendering */\n  pause(): void\n  /** Resume rendering */\n  resume(): void\n  /** Check if instance is active */\n  isActive(): boolean\n}\n\n/** CLI features that adapters can support */\nexport type CLIFeature = \n  | \"useInput\"\n  | \"useStdin\"\n  | \"useStdout\"\n  | \"useFocus\"\n  | \"useFocusManager\"\n  | \"measureElement\"\n  | \"staticOutput\"\n  | \"flexbox\"\n  | \"colors16\"\n  | \"colors256\"\n  | \"trueColor\"\n  | \"unicode\"\n  | \"mouse\"\n  | \"hyperlinks\"\n  | \"images\"\n  | \"boxDrawing\"\n\n// ============================================\n// Registry Types\n// ============================================\n\n/** Registry for managing CLI apps */\nexport interface CLIAppRegistry {\n  /** Register a CLI app */\n  register(app: CLIAppDefinition): void\n  /** Unregister an app */\n  unregister(name: string): void\n  /** Get an app by name */\n  get(name: string): CLIAppDefinition | undefined\n  /** List all registered apps */\n  list(): CLIAppDefinition[]\n  /** Check if app exists */\n  has(name: string): boolean\n  /** Get apps by library type */\n  getByLibrary(library: CLILibrary): CLIAppDefinition[]\n  /** Search apps by keyword */\n  search(query: string): CLIAppDefinition[]\n  /** Get app count */\n  count(): number\n}\n\n/** Registry for managing adapters */\nexport interface CLIAdapterRegistry {\n  /** Register an adapter */\n  register(adapter: ICLIAdapter): void\n  /** Unregister an adapter */\n  unregister(library: CLILibrary): void\n  /** Get adapter for library */\n  getAdapter(library: CLILibrary): ICLIAdapter | undefined\n  /** List all registered adapters */\n  list(): ICLIAdapter[]\n  /** Check library support */\n  supportsLibrary(library: CLILibrary): boolean\n  /** Get supported version range for library */\n  getSupportedVersions(library: CLILibrary): VersionRange | undefined\n}\n\n// ============================================\n// App Instance Types\n// ============================================\n\n/** Status of a running CLI app */\nexport type CLIAppStatus = \"starting\" | \"running\" | \"suspended\" | \"exiting\" | \"terminated\" | \"error\"\n\n/** Running app instance */\nexport interface CLIAppInstance {\n  /** Unique instance ID */\n  readonly id: string\n  /** App definition */\n  readonly app: CLIAppDefinition\n  /** Current status */\n  status: CLIAppStatus\n  /** Start timestamp */\n  readonly startTime: Date\n  /** Exit code (if terminated) */\n  exitCode?: number\n  /** Error (if status is error) */\n  error?: Error\n  /** Process ID (for display purposes) */\n  readonly pid: number\n  \n  /** Suspend execution (background) */\n  suspend(): void\n  /** Resume execution (foreground) */\n  resume(): void\n  /** Terminate the app */\n  terminate(code?: number): void\n  /** Send input to the app */\n  sendInput(input: string): void\n  /** Send signal to the app */\n  sendSignal(signal: CLISignal): void\n  \n  /** Subscribe to status change event */\n  onStatusChange(callback: (status: CLIAppStatus) => void): () => void\n  /** Subscribe to exit event */\n  onExit(callback: (code: number) => void): () => void\n  /** Subscribe to error event */\n  onError(callback: (error: Error) => void): () => void\n  /** Subscribe to output event */\n  onOutput(callback: (output: string) => void): () => void\n}\n\n/** Signals that can be sent to CLI apps */\nexport type CLISignal = \"SIGINT\" | \"SIGTERM\" | \"SIGKILL\" | \"SIGHUP\" | \"SIGUSR1\" | \"SIGUSR2\"\n\n// ============================================\n// Plugin Host Types\n// ============================================\n\n/** CLI Plugin Host configuration */\nexport interface CLIPluginHostOptions {\n  /** Maximum concurrent running apps */\n  maxConcurrentApps?: number\n  /** Enable sandbox mode for untrusted apps */\n  sandboxMode?: boolean\n  /** Default library if not specified */\n  defaultLibrary?: CLILibrary\n  /** Default library version if not specified */\n  defaultLibraryVersion?: VersionRange\n  /** Custom adapters to register */\n  adapters?: ICLIAdapter[]\n  /** Auto-initialize on creation */\n  autoInitialize?: boolean\n}\n\n/** CLI Plugin Host interface */\nexport interface CLIPluginHost {\n  // ============================================\n  // App Management\n  // ============================================\n  \n  /** Register a CLI app */\n  registerApp(app: CLIAppDefinition): void\n  /** Unregister an app */\n  unregisterApp(name: string): void\n  /** Get app by name */\n  getApp(name: string): CLIAppDefinition | undefined\n  /** List all apps */\n  listApps(): CLIAppDefinition[]\n  \n  // ============================================\n  // App Execution\n  // ============================================\n  \n  /** Launch an app */\n  launch(\n    name: string,\n    args?: string[],\n    flags?: Record<string, string | boolean | number>\n  ): Promise<CLIAppInstance>\n  \n  /** Get running instance */\n  getInstance(instanceId: string): CLIAppInstance | undefined\n  /** List running instances */\n  listRunningInstances(): CLIAppInstance[]\n  /** Terminate an instance */\n  terminate(instanceId: string, code?: number): void\n  /** Terminate all running apps */\n  terminateAll(): void\n  /** Get foreground instance */\n  getForegroundInstance(): CLIAppInstance | undefined\n  /** Bring instance to foreground */\n  bringToForeground(instanceId: string): void\n  \n  // ============================================\n  // Adapter Management\n  // ============================================\n  \n  /** Register an adapter */\n  registerAdapter(adapter: ICLIAdapter): void\n  /** Get adapter for library */\n  getAdapter(library: CLILibrary): ICLIAdapter | undefined\n  /** Check library support */\n  supportsLibrary(library: CLILibrary): boolean\n  /** List supported libraries */\n  listSupportedLibraries(): CLILibrary[]\n  \n  // ============================================\n  // Lifecycle\n  // ============================================\n  \n  /** Initialize the host */\n  initialize(context: OpenTUIRuntimeContext): Promise<void>\n  /** Check if host is initialized */\n  isInitialized(): boolean\n  /** Cleanup resources */\n  destroy(): Promise<void>\n  \n  // ============================================\n  // Events\n  // ============================================\n  \n  /** Subscribe to app launched event */\n  onAppLaunched(callback: (instance: CLIAppInstance) => void): () => void\n  /** Subscribe to app terminated event */\n  onAppTerminated(callback: (instance: CLIAppInstance, code: number) => void): () => void\n  /** Subscribe to app error event */\n  onAppError(callback: (instance: CLIAppInstance, error: Error) => void): () => void\n}\n\n// ============================================\n// Utility Types\n// ============================================\n\n/** Event emitter for CLI apps */\nexport interface CLIEventEmitter<T extends Record<string, unknown[]>> {\n  on<K extends keyof T>(event: K, callback: (...args: T[K]) => void): () => void\n  off<K extends keyof T>(event: K, callback: (...args: T[K]) => void): void\n  emit<K extends keyof T>(event: K, ...args: T[K]): void\n  once<K extends keyof T>(event: K, callback: (...args: T[K]) => void): () => void\n}\n\n/** Argument parser result */\nexport interface ParsedArgs {\n  args: string[]\n  flags: Record<string, string | boolean | number>\n  command?: string\n  subcommand?: string\n}\n",
      "type": "registry:ui"
    }
  ]
}